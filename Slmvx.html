<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SECURE LINK</title>
    <style>
        /* --- 1. CONFIGURATION GLOBALE --- */
        :root {
            --glow: #ffffff;
            /* On unifie tout sur le gris foncé "Intro" */
            --bg-color: #1a1a1a;      
        }

        body {
            background-color: var(--bg-color);
            color: var(--glow);
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
        }

        /* --- 2. TEXTURES & GLOW --- */
        /* Les scanlines restent fixes par dessus tout le monde */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 3px, 3px 100%;
            pointer-events: none;
            z-index: 999; /* Toujours au premier plan */
        }

        /* Ombre portée blanche (Glow) */
        .glow-text {
            text-shadow: 0 0 4px rgba(255, 255, 255, 0.8), 0 0 10px rgba(255, 255, 255, 0.4);
        }
        
        .glow-box {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.15), inset 0 0 10px rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.02); /* Fond très léger pour la carte */
        }

        /* --- 3. SEQUENCE D'INTRO --- */
        #intro-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-color); /* Même gris que le fond */
            z-index: 500;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Le Loader */
        .spinner {
            width: 50px; height: 50px;
            border: 4px solid #333; /* Cercle gris sombre */
            border-top: 4px solid #fff; /* Partie tournante blanche */
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
            box-shadow: 0 0 15px rgba(255,255,255,0.2);
        }

        #validation-text {
            font-size: 1.2rem;
            letter-spacing: 2px;
            text-align: center;
            min-height: 1.5em;
        }

        /* --- 4. ANIMATION "TV ÉTEINTE" --- */
        .crt-off-anim {
            animation: crt-turn-off 0.7s cubic-bezier(0.23, 1.00, 0.32, 1.00) forwards;
        }

        @keyframes crt-turn-off {
            /* On part de l'état normal */
            0% { transform: scale(1, 1); opacity: 1; filter: brightness(1); }
            /* On écrase l'image en une ligne horizontale */
            40% { transform: scale(1, 0.005); opacity: 1; filter: brightness(2); } 
            /* On écrase la ligne en un point et ça disparaît */
            100% { transform: scale(0, 0); opacity: 0; filter: brightness(5); } 
        }
        
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- 5. LA CARTE CADEAU --- */
        .card-container {
            width: 85%; max-width: 400px;
            padding: 25px;
            border-radius: 8px;
            backdrop-filter: blur(2px); /* Léger flou derrière */
            opacity: 0; 
            transition: opacity 2s ease;
            position: relative;
            z-index: 100; /* Derrière les scanlines mais devant le fond */
        }

        .card-visible { opacity: 1; }

        .header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #555; padding-bottom: 10px; font-size: 0.7rem; margin-bottom: 20px;}
        .amount-row { text-align: center; margin: 30px 0; }
        .amount { font-size: 3.5rem; font-weight: bold; }
        .code-display { background: rgba(255,255,255,0.05); padding: 15px; text-align: center; font-size: 1.2rem; letter-spacing: 2px; margin-top: 15px; cursor: pointer; border: 1px dashed #666; transition: all 0.3s; }
        .code-display:active { background: #fff; color: #000; }
        
        /* Curseur clignotant */
        .cursor { animation: blink 1s infinite; font-weight: bold; }
        @keyframes blink { 50% { opacity: 0; } }

    </style>
</head>
<body>

    <div class="scanlines"></div>

    <div id="intro-layer">
        
        <div id="loader-step" style="display:flex; flex-direction:column; align-items:center;">
            <div class="spinner"></div>
            <div class="glow-text" style="font-size: 0.8rem; letter-spacing: 3px; margin-top: 10px;">CHECKING AUTHORIZATION</div>
        </div>

        <div id="text-step" style="display:none;">
            <div class="glow-text">
                <span id="typewriter-target"></span><span class="cursor">_</span>
            </div>
        </div>
    </div>


    <div class="card-container glow-box" id="main-card">
        <div class="header-row">
            <span>// GIFT_PROTOCOL_V2</span>
            <span>SECURE</span>
        </div>

        <div class="amount-row">
            <div class="amount glow-text">50€</div>
            <div style="font-size: 0.7rem; letter-spacing: 3px; opacity: 0.7; margin-top:5px;">CREDITS</div>
        </div>

        <div style="margin-top: 30px;">
            <span style="font-size: 0.7rem; opacity: 0.6; display: block;">POUR L'AGENT:</span>
            <div style="font-size: 1.2rem; margin-bottom: 20px; letter-spacing: 1px;">PRENOM</div>

            <span style="font-size: 0.7rem; opacity: 0.6; display: block;">CODE D'ACCÈS:</span>
            <div class="code-display glow-text" onclick="copyCode()">
                XMAS-2025-SLMVX
            </div>
            <div id="copy-msg" style="text-align:center; font-size:0.6rem; opacity:0; transition:opacity 0.3s; margin-top:10px;">COPIÉ DANS LE PRESSE-PAPIER</div>
        </div>
    </div>


    <script>
        const textToType = "ID VALIDATED : SLMVX";

        window.onload = function() {
            // 1. Délai Loader (1.5s)
            setTimeout(function() {
                document.getElementById('loader-step').style.display = 'none';
                document.getElementById('text-step').style.display = 'block';
                
                // 2. Écriture
                typeWriter(textToType, 0);

            }, 1500);
        };

        function typeWriter(text, i) {
            if (i < text.length) {
                document.getElementById("typewriter-target").innerHTML += text.charAt(i);
                // Vitesse écriture
                setTimeout(function() { typeWriter(text, i + 1); }, 50);
            } else {
                // 3. Fin écriture -> Pause de 2 secondes
                setTimeout(triggerCrtOff, 2000);
            }
        }

        function triggerCrtOff() {
            // 4. Animation TV
            const intro = document.getElementById('intro-layer');
            intro.classList.add('crt-off-anim');

            // 5. Apparition carte
            setTimeout(function() {
                document.getElementById('main-card').classList.add('card-visible');
            }, 600); 
        }

        function copyCode() {
            navigator.clipboard.writeText("XMAS-2025-SLMVX");
            document.getElementById('copy-msg').style.opacity = 1;
            setTimeout(() => { document.getElementById('copy-msg').style.opacity = 0; }, 2000);
        }
    </script>
</body>
</html>
